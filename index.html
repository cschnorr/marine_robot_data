<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Microscope Grid Viewer</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .grid {
      display: grid;
      grid-template-columns: repeat(7, 60px);
      gap: 4px;
      margin-bottom: 30px;
    }
    .cell {
      width: 60px;
      height: 60px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      text-align: center;
      line-height: 60px;
      cursor: pointer;
      font-weight: bold;
    }
    .cell:hover {
      background-color: #d0ebff;
    }
    #viewer img {
      max-width: 600px;
      display: block;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<h1>Microscope Grid Viewer</h1>
<p>Click any tile to view the associated microscope image.</p>

<div class="grid" id="grid"></div>

<div id="viewer"></div>

<script>
  const tileIDs = [];
  for (let r = 0; r < 7; r++) {
    for (let c = 0; c < 7; c++) {
      tileIDs.push(`${r}${c}`);
    }
  }

  const imageFilenames = [
    // List your actual filenames here:
    "Snap_013_0001.jpg", "Snap_013_0102.jpg", "Snap_013_2425.jpg",
    // ...
  ];

  // Build lookup: tileID -> list of images
  const tileMap = {};
  tileIDs.forEach(id => tileMap[id] = []);
  imageFilenames.forEach(name => {
    const match = name.match(/(\d{2})(\d{2})\.jpg/);
    if (match) {
      const [_, t1, t2] = match;
      tileMap[t1]?.push(name);
      tileMap[t2]?.push(name);
    }
  });

  const grid = document.getElementById("grid");
  const viewer = document.getElementById("viewer");

  tileIDs.forEach(id => {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.textContent = id;
    cell.onclick = () => {
      viewer.innerHTML = "";
      const imgs = tileMap[id];
      if (!imgs.length) {
        viewer.innerHTML = `<p>No image found for tile ${id}</p>`;
      } else {
        imgs.forEach(img => {
          const el = document.createElement("img");
          el.src = `img/${img}`;
          el.alt = img;
          viewer.appendChild(el);
        });
      }
    };
    grid.appendChild(cell);
  });
</script>

</body>
</html>
